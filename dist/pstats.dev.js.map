{"version":3,"file":"pstats.dev.js","sources":["../lib/polyfill.js","../lib/graph.js","../lib/stack-graph.js","../lib/perf-counter.js","../lib/stats.js","../index.js"],"sourcesContent":["export default function polyfill() {\n  if (typeof window.performance === 'undefined') {\n    window.performance = {};\n  }\n\n  if (!window.performance.now) {\n\n    var nowOffset = Date.now();\n\n    if (performance.timing && performance.timing.navigationStart) {\n      nowOffset = performance.timing.navigationStart;\n    }\n\n    window.performance.now = function now() {\n      return Date.now() - nowOffset;\n    };\n  }\n\n  if (!window.performance.mark) {\n    window.performance.mark = function () { };\n  }\n\n  if (!window.performance.measure) {\n    window.performance.measure = function () { };\n  }\n\n  if (!window.performance.memory) {\n    window.performance.memory = { usedJSHeapSize: 0, totalJSHeapSize: 0 };\n  }\n}","export default class Graph {\n  constructor(dom, color) {\n    this._color = color || '#666';\n    this._max = 0;\n    this._current = 0;\n\n    this._canvas = document.createElement('canvas');\n    this._ctx = this._canvas.getContext('2d');\n\n    this._canvasDot = document.createElement('canvas');\n    this._ctxDot = this._canvasDot.getContext('2d');\n\n    this._canvasAlarm = document.createElement('canvas'),\n    this._ctxAlarm = this._canvasAlarm.getContext('2d');\n\n    this._canvas.className = 'pstats-canvas';\n    dom.appendChild(this._canvas);\n  }\n\n  init(width, height) {\n    this._canvas.width = width;\n    this._canvas.height = height;\n    this._canvas.style.width = `${width}px`;\n    this._canvas.style.height = `${height}px`;\n\n    this._ctx.fillStyle = '#444';\n    this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n\n    this._canvasDot.width = 1;\n    this._canvasDot.height = 2 * height;\n\n    this._ctxDot.fillStyle = '#444';\n    this._ctxDot.fillRect(0, 0, 1, 2 * height);\n    this._ctxDot.fillStyle = this._color;\n    this._ctxDot.fillRect(0, height, 1, height);\n    this._ctxDot.fillStyle = '#fff';\n    this._ctxDot.globalAlpha = 0.5;\n    this._ctxDot.fillRect(0, height, 1, 1);\n    this._ctxDot.globalAlpha = 1;\n\n    this._canvasAlarm.width = 1;\n    this._canvasAlarm.height = 2 * height;\n\n    this._ctxAlarm.fillStyle = '#444';\n    this._ctxAlarm.fillRect(0, 0, 1, 2 * height);\n    this._ctxAlarm.fillStyle = '#b70000';\n    this._ctxAlarm.fillRect(0, height, 1, height);\n    this._ctxAlarm.globalAlpha = 0.5;\n    this._ctxAlarm.fillStyle = '#fff';\n    this._ctxAlarm.fillRect(0, height, 1, 1);\n    this._ctxAlarm.globalAlpha = 1;\n  }\n\n  draw(value, alarm) {\n    this._current += (value - this._current) * 0.1;\n    this._max *= 0.99;\n\n    if (this._current > this._max) {\n      this._max = this._current;\n    }\n\n    // DISABLE: pstats is not designed for monitor ranged value\n    // if (this._current < this._min) {\n    //   this._min = this._current;\n    // }\n    // let ratio = (this._current - this._min) / (this._max - this._min);\n\n    this._ctx.drawImage(this._canvas,\n      1, 0, this._canvas.width - 1, this._canvas.height,\n      0, 0, this._canvas.width - 1, this._canvas.height\n    );\n\n    if (alarm) {\n      this._ctx.drawImage(this._canvasAlarm,\n        this._canvas.width - 1,\n        -this._canvas.height * this._current / this._max\n      );\n    } else {\n      this._ctx.drawImage(this._canvasDot,\n        this._canvas.width - 1,\n        -this._canvas.height * this._current / this._max\n      );\n    }\n  }\n}","export default class StackGraph {\n  constructor(dom, colors) {\n    this._colors = colors;\n\n    this._canvas = document.createElement('canvas');\n    this._ctx = this._canvas.getContext('2d');\n\n    this._canvas.className = 'pstats-canvas';\n    dom.appendChild(this._canvas);\n  }\n\n  init(width, height, n) {\n    this._canvas.width = width;\n    this._canvas.height = height * n;\n    this._canvas.style.width = `${width}px`;\n    this._canvas.style.height = `${height * n}px`;\n\n    this._ctx.fillStyle = '#444';\n    this._ctx.fillRect(0, 0, width, height * n);\n  }\n\n  draw(values) {\n    this._ctx.drawImage(this._canvas,\n      1, 0, this._canvas.width - 1, this._canvas.height,\n      0, 0, this._canvas.width - 1, this._canvas.height\n    );\n\n    let th = 0;\n    for (let i = 0; i < values.length; ++i) {\n      let h = values[i] * this._canvas.height;\n      this._ctx.fillStyle = this._colors[i];\n      this._ctx.fillRect(this._canvas.width - 1, th, 1, h);\n      th += h;\n    }\n  }\n}","export default class PerfCounter {\n  constructor(id, opts) {\n    this._id = id;\n    this._opts = opts || {};\n\n    this._idstart = `${id}_start`;\n    this._idend = `${id}_end`;\n\n    this._value = 0;\n    this._total = 0;\n    this._averageValue = 0;\n    this._accumValue = 0;\n    this._accumStart = window.performance.now();\n    this._accumSamples = 0;\n    this._started = false;\n\n    this._time = performance.now();\n  }\n\n  _average(v) {\n    if (this._opts.average) {\n      this._accumValue += v;\n      ++this._accumSamples;\n\n      let t = performance.now();\n      if (t - this._accumStart >= (this._opts.avgMs || 1000)) {\n        this._averageValue = this._accumValue / this._accumSamples;\n        this._accumValue = 0;\n        this._accumStart = t;\n        this._accumSamples = 0;\n      }\n    }\n  }\n\n  get value() { return this._value; }\n  set value(v) {\n    this._value = v;\n    this._average(this._value);\n  }\n\n  start() {\n    this._time = window.performance.now();\n    window.performance.mark(this._idstart);\n\n    this._started = true;\n  }\n\n  end() {\n    this._value = window.performance.now() - this._time;\n    window.performance.mark(this._idend);\n    if (this._started) {\n      window.performance.measure(this._id, this._idstart, this._idend);\n    }\n\n    this._average(this._value);\n  }\n\n  tick() {\n    this.end();\n    this.start();\n  }\n\n  frame() {\n    let t = window.performance.now();\n    let e = t - this._time;\n    this._total++;\n\n    if (e > 1000) {\n      if (this._opts.interpolate) {\n        this._value = this._total * 1000 / e;\n      } else {\n        this._value = this._total;\n      }\n\n      this._total = 0;\n      this._time = t;\n      this._average(this._value);\n    }\n  }\n\n  sampleAverage() {\n    let v = this._opts.average ? this._averageValue : this._value;\n    return Math.round(v * 100) / 100;\n  }\n\n  sampleAlarm() {\n    return (\n      (this._opts.below && this._value < this._opts.below) ||\n      (this._opts.over && this._value > this._opts.over)\n    );\n  }\n\n    // this._graph.draw(this._value, a);\n    // this._dom.className = a ? 'pstats-counter-base alarm' : 'pstats-counter-base';\n}\n","import Graph from './graph';\nimport StackGraph from './stack-graph';\nimport PerfCounter from './perf-counter';\n\nlet _canvasWidth = 100;\nlet _canvasHeight = 10;\nlet _css = `\n  .pstats {\n    position: absolute;\n    z-index: 9999;\n\n    padding: 5px;\n    width: ${_canvasWidth+150}px;\n    right: 0;\n    bottom: 0;\n\n    font-size: 10px;\n    font-family: 'Roboto Condensed', tahoma, sans-serif;\n    overflow: hidden;\n    user-select: none;\n    cursor: default;\n\n    background: rgba(0,0,0,0.2);\n    border-radius: 3px;\n\n  }\n\n  .pstats-container {\n    display: flex;\n    flex-direction: column;\n    color: #888;\n  }\n\n  .pstats-item {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  }\n\n  .pstats-label {\n    display: flex;\n    flex-direction: row;\n    flex: 1;\n\n    text-align: left;\n    margin-right: 5px;\n\n    transition: background 0.3s;\n  }\n\n  .pstats-label.alarm {\n    color: #ccc;\n    background: #800;\n\n    transition: background 0s;\n  }\n\n  .pstats-counter-id {\n    flex: 1;\n  }\n\n  .pstats-counter-value {\n    width: 30px;\n    text-align: right;\n  }\n\n  .pstats-fraction {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  }\n\n  .pstats-legend {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n\n    text-align: right;\n    margin-right: 5px;\n  }\n`;\n\n// DISABLE:\n// let cssFont = 'https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300';\n// let cssFontEL = document.createElement('link');\n// cssFontEL.href = cssFont;\n// cssFontEL.rel = 'stylesheet';\n// cssFontEL.type = 'text/css';\n// document.head.appendChild(cssFontEL);\n\n// add global style\nlet styleEL = document.createElement('style');\nstyleEL.type = 'text/css';\nstyleEL.textContent = _css;\ndocument.head.appendChild(styleEL);\n\n//\nexport default class Stats {\n  constructor (dom, opts) {\n    opts = opts || {};\n    this._colors = opts.colors || ['#850700', '#c74900', '#fcb300', '#284280', '#4c7c0c'];\n    this._values = opts.values || {};\n    this._fractions = opts.fractions || [];\n    this._id2perf = {};\n    this._id2item = {};\n\n    if (opts.css) {\n      let styleEL = document.createElement('style');\n      styleEL.type = 'text/css';\n      styleEL.textContent = opts.css;\n      document.head.appendChild(styleEL);\n    }\n\n    // TODO\n    // if (opts.plugins) {\n    //   if (!opts.values) opts.values = {};\n    //   if (!opts.groups) opts.groups = [];\n    //   if (!opts.fractions) opts.fractions = [];\n    //   for (let j = 0; j < opts.plugins.length; j++) {\n    //     opts.plugins[j].attach(_perf);\n    //     iterateKeys(opts.plugins[j].values, function (k) {\n    //       opts.values[k] = opts.plugins[j].values[k];\n    //     });\n    //     opts.groups = opts.groups.concat(opts.plugins[j].groups);\n    //     opts.fractions = opts.fractions.concat(opts.plugins[j].fractions);\n    //   }\n    // } else {\n    //   opts.plugins = {};\n    // }\n\n    // TODO\n    // if (opts.groups) {\n    //   iterateKeys(opts.groups, function (j) {\n    //     let g = opts.groups[parseInt(j, 10)];\n    //     let div = document.createElement('div');\n    //     div.className = 'rs-group';\n    //     g.div = div;\n    //     let h1 = document.createElement('h1');\n    //     h1.textContent = g.caption;\n    //     h1.addEventListener('click', function (e) {\n    //       this.classList.toggle('hidden');\n    //       e.preventDefault();\n    //     }.bind(div));\n    //     div.appendChild(h1);\n    //     div.appendChild(div);\n    //   });\n    // }\n\n    // ==================\n    // DOM\n    // ==================\n\n    this._root = document.createElement('div');\n    this._root.className = 'pstats';\n\n    let containerEL = document.createElement('div');\n    containerEL.className = 'pstats-container';\n\n    this._root.appendChild(containerEL);\n\n    // pstats-item\n    for (let id in this._values) {\n      let vopts = this._values[id];\n\n      // .pstats-item\n      let itemEL = document.createElement('div');\n      itemEL.className = 'pstats-item';\n\n      // .pstats-label\n      let label = document.createElement('div');\n      label.className = 'pstats-label';\n\n      let spanId = document.createElement('span');\n      spanId.className = 'pstats-counter-id';\n      spanId.textContent = vopts.desc || id;\n\n      let spanValue = document.createElement('div');\n      spanValue.className = 'pstats-counter-value';\n\n      let spanValueText = document.createTextNode('');\n      spanValueText.nodeValue = '0';\n\n      label.appendChild(spanId);\n      label.appendChild(spanValue);\n      spanValue.appendChild(spanValueText);\n      itemEL.appendChild(label);\n\n      // graph\n      let graph = new Graph(itemEL, vopts.color);\n      graph.init(_canvasWidth, _canvasHeight);\n\n      //\n      this._id2item[id] = {\n        label: label,\n        valueText: spanValueText,\n        graph,\n      };\n\n      containerEL.appendChild(itemEL);\n    }\n\n    // pstats-fraction\n    if (opts.fractions) {\n      for ( let i = 0; i < opts.fractions.length; ++i ) {\n        let fraction = opts.fractions[i];\n\n        let fractionEL = document.createElement('div');\n        fractionEL.className = 'pstats-fraction';\n\n        let legend = document.createElement('div');\n        legend.className = 'pstats-legend';\n\n        let steps = fraction.steps;\n        for (let h = 0; h < steps.length; ++h) {\n          let p = document.createElement('span');\n          p.textContent = steps[h];\n          p.style.color = this._colors[h];\n          legend.appendChild(p);\n        }\n\n        fractionEL.appendChild(legend);\n        fractionEL.style.height = steps.length * _canvasHeight + 'px';\n        fraction.dom = fractionEL;\n\n        let graph = new StackGraph(fractionEL, this._colors);\n        graph.init(_canvasWidth, _canvasHeight, steps.length);\n\n        fraction.graph = graph;\n\n        containerEL.appendChild(fractionEL);\n      }\n    }\n\n    dom.appendChild(this._root);\n  }\n\n  item(id) {\n    if (!id) {\n      return null;\n    }\n\n    id = id.toLowerCase();\n    let perf = this._id2perf[id];\n    if (perf) {\n      return perf;\n    }\n\n    // TODO:\n    // let group = null;\n    // if (this._opts && this._opts.groups) {\n    //   iterateKeys(this._opts.groups, function (j) {\n    //     let g = this._opts.groups[parseInt(j, 10)];\n    //     if (!group && g.values.indexOf(id.toLowerCase()) !== -1) {\n    //       group = g;\n    //     }\n    //   });\n    // }\n\n    let vopts = this._values[id];\n    perf = new PerfCounter(id, vopts);\n    this._id2perf[id] = perf;\n\n    return perf;\n  }\n\n  tick() {\n    for (let id in this._values) {\n      let perf = this._id2perf[id];\n      if (perf) {\n        let av = perf.sampleAverage();\n        let alarm = perf.sampleAlarm();\n        let item = this._id2item[id];\n\n        item.label.classList.toggle('alarm', alarm > 0);\n        item.valueText.nodeValue = av;\n        item.graph.draw(perf.value, alarm);\n      }\n    }\n\n    // fractions\n    for ( let i = 0; i < this._fractions.length; ++i ) {\n      let fraction = this._fractions[i];\n      let v = [];\n\n      let perfBase = this._id2perf[fraction.base.toLowerCase()];\n      if (perfBase) {\n        let steps = fraction.steps;\n        for (let j = 0; j < steps.length; ++j) {\n          let id = steps[j].toLowerCase();\n          let perf = this._id2perf[id];\n          if (perf) {\n            v.push(perf.value / perfBase.value);\n          }\n        }\n        fraction.graph.draw(v);\n      }\n    }\n\n    // TODO:\n    // iterateKeys(this._opts.plugins, function (j) {\n    //   this._opts.plugins[j].update();\n    // });\n  }\n}","import polyfill from './lib/polyfill';\nimport Stats from './lib/stats';\n\npolyfill();\n\nlet pstats = {\n  new (dom, settings) {\n    let stats = new Stats(dom, settings);\n    return function (id) {\n      if (!id) {\n        return stats;\n      }\n\n      return stats.item(id);\n    };\n  },\n};\n\nexport default pstats;"],"names":[],"mappings":"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"}